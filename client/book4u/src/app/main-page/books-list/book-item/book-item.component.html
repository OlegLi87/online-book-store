<app-confirm-modal
  *ngIf="showModal"
  [question]="modalQuestion"
></app-confirm-modal>

<app-update-create-modal
  [book]="book"
  (modalClosed)="showCreateUpdateModal = false"
  *ngIf="showCreateUpdateModal"
></app-update-create-modal>

<div class="book-container">
  <div
    class="image-container"
    [ngStyle]="{
      'background-image': 'url(' + book.imageUrl + ')'
    }"
    (click)="imageClicked()"
  >
    <div
      class="icon-container cart"
      *ngIf="!userStream$.value?.isAdmin && !isAdded()"
      (click)="addToCart($event)"
    >
      <svg
        id="cart-image"
        enable-background="new 0 0 512 512"
        viewBox="0 0 512 512"
      >
        <path
          d="m504.399 185.065c-6.761-8.482-16.904-13.348-27.83-13.348h-98.604l-53.469-122.433c-3.315-7.591-12.157-11.06-19.749-7.743-7.592 3.315-11.059 12.158-7.743 19.75l48.225 110.427h-178.458l48.225-110.427c3.315-7.592-.151-16.434-7.743-19.75-7.591-3.317-16.434.15-19.749 7.743l-53.469 122.434h-98.604c-10.926 0-21.069 4.865-27.83 13.348-6.637 8.328-9.086 19.034-6.719 29.376l52.657 230c3.677 16.06 17.884 27.276 34.549 27.276h335.824c16.665 0 30.872-11.216 34.549-27.276l52.657-230.001c2.367-10.342-.082-21.048-6.719-29.376zm-80.487 256.652h-335.824c-2.547 0-4.778-1.67-5.305-3.972l-52.657-229.998c-.413-1.805.28-3.163.936-3.984.608-.764 1.985-2.045 4.369-2.045h85.503l-3.929 8.997c-3.315 7.592.151 16.434 7.743 19.75 1.954.854 3.99 1.258 5.995 1.258 5.782 0 11.292-3.363 13.754-9l9.173-21.003h204.662l9.173 21.003c2.462 5.638 7.972 9 13.754 9 2.004 0 4.041-.404 5.995-1.258 7.592-3.315 11.059-12.158 7.743-19.75l-3.929-8.997h85.503c2.384 0 3.761 1.281 4.369 2.045.655.822 1.349 2.18.936 3.983l-52.657 230c-.528 2.301-2.76 3.971-5.307 3.971z"
        />
        <path
          d="m166 266.717c-8.284 0-15 6.716-15 15v110c0 8.284 6.716 15 15 15s15-6.716 15-15v-110c0-8.284-6.715-15-15-15z"
        />
        <path
          d="m256 266.717c-8.284 0-15 6.716-15 15v110c0 8.284 6.716 15 15 15s15-6.716 15-15v-110c0-8.284-6.716-15-15-15z"
        />
        <path
          d="m346 266.717c-8.284 0-15 6.716-15 15v110c0 8.284 6.716 15 15 15s15-6.716 15-15v-110c-.001-8.284-6.716-15-15-15z"
        />
      </svg>
    </div>
    <div
      class="icon-container checked"
      *ngIf="!userStream$.value?.isAdmin && isAdded()"
      (click)="removeFromCart($event)"
    >
      <svg
        version="1.1"
        x="0px"
        y="0px"
        viewBox="0 0 367.805 367.805"
        style="enable-background: new 0 0 367.805 367.805"
        xml:space="preserve"
      >
        <g>
          <path
            style="fill: #3bb54a"
            d="M183.903,0.001c101.566,0,183.902,82.336,183.902,183.902s-82.336,183.902-183.902,183.902
		S0.001,285.469,0.001,183.903l0,0C-0.288,82.625,81.579,0.29,182.856,0.001C183.205,0,183.554,0,183.903,0.001z"
          />
          <polygon
            style="fill: #d4e1f4"
            points="285.78,133.225 155.168,263.837 82.025,191.217 111.805,161.96 155.168,204.801 
		256.001,103.968 	"
          />
        </g>
        <g></g>
        <g></g>
      </svg>
    </div>
    <div
      class="icon-container delete"
      *ngIf="userStream$.value?.isAdmin"
      (click)="delete($event)"
    >
      <svg viewBox="0 0 512 512">
        <path
          d="m256 0c-141.164062 0-256 114.835938-256 256s114.835938 256 256 256 256-114.835938 256-256-114.835938-256-256-256zm0 0"
          fill="#f44336"
        />
        <path
          d="m350.273438 320.105469c8.339843 8.34375 8.339843 21.824219 0 30.167969-4.160157 4.160156-9.621094 6.25-15.085938 6.25-5.460938 0-10.921875-2.089844-15.082031-6.25l-64.105469-64.109376-64.105469 64.109376c-4.160156 4.160156-9.621093 6.25-15.082031 6.25-5.464844 0-10.925781-2.089844-15.085938-6.25-8.339843-8.34375-8.339843-21.824219 0-30.167969l64.109376-64.105469-64.109376-64.105469c-8.339843-8.34375-8.339843-21.824219 0-30.167969 8.34375-8.339843 21.824219-8.339843 30.167969 0l64.105469 64.109376 64.105469-64.109376c8.34375-8.339843 21.824219-8.339843 30.167969 0 8.339843 8.34375 8.339843 21.824219 0 30.167969l-64.109376 64.105469zm0 0"
          fill="#fafafa"
        />
      </svg>
    </div>
  </div>
  <h4 class="info title">{{ book.title }}</h4>
  <h5 class="info author"><span class="prefix">by</span> {{ book.author }}</h5>
  <div class="rating">
    <app-rating-stars
      [stars]="5"
      [rating]="book.rating"
      [readable]="true"
    ></app-rating-stars>
  </div>
  <h4 class="info price">{{ book.price | currency: "USD" }}</h4>
</div>
